import{m as q,a as b,V as C}from"./VOverlay.17b2a242.js";import{f as F}from"./forwardRefs.34034356.js";import{C as O,a as x,m as V,T,p as L,aq as I,L as B,u as K,g as k,h as U,i as H,v as R,s as Y,aY as j,J as N,aZ as X,aT as A,q as J,ar as D}from"./index.eb43fa57.js";import{u as W}from"./scopeId.23bd787d.js";import{b as E,d as Z,s as M,c as z,g as G,n as Q}from"./easing.c06eec13.js";import{u as _,i as ee}from"./index.77990c4a.js";const te=L({target:[Object,Array]},"v-dialog-transition"),ne=O()({name:"VDialogTransition",props:te(),setup(a,m){let{slots:n}=m;const i={onBeforeEnter(o){o.style.pointerEvents="none",o.style.visibility="hidden"},async onEnter(o,y){var v;await new Promise(l=>requestAnimationFrame(l)),await new Promise(l=>requestAnimationFrame(l)),o.style.visibility="";const{x:u,y:s,sx:t,sy:f,speed:d}=$(a.target,o),p=E(o,[{transform:`translate(${u}px, ${s}px) scale(${t}, ${f})`,opacity:0},{}],{duration:225*d,easing:Z});(v=S(o))==null||v.forEach(l=>{E(l,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*d,easing:M})}),p.finished.then(()=>y())},onAfterEnter(o){o.style.removeProperty("pointer-events")},onBeforeLeave(o){o.style.pointerEvents="none"},async onLeave(o,y){var v;await new Promise(l=>requestAnimationFrame(l));const{x:u,y:s,sx:t,sy:f,speed:d}=$(a.target,o);E(o,[{},{transform:`translate(${u}px, ${s}px) scale(${t}, ${f})`,opacity:0}],{duration:125*d,easing:z}).finished.then(()=>y()),(v=S(o))==null||v.forEach(l=>{E(l,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*d,easing:M})})},onAfterLeave(o){o.style.removeProperty("pointer-events")}};return()=>a.target?x(T,V({name:"dialog-transition"},i,{css:!1}),n):x(T,{name:"dialog-transition"},n)}});function S(a){var n;const m=(n=a.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))==null?void 0:n.children;return m&&[...m]}function $(a,m){const n=G(a),i=Q(m),[o,y]=getComputedStyle(m).transformOrigin.split(" ").map(c=>parseFloat(c)),[u,s]=getComputedStyle(m).getPropertyValue("--v-overlay-anchor-origin").split(" ");let t=n.left+n.width/2;u==="left"||s==="left"?t-=n.width/2:(u==="right"||s==="right")&&(t+=n.width/2);let f=n.top+n.height/2;u==="top"||s==="top"?f-=n.height/2:(u==="bottom"||s==="bottom")&&(f+=n.height/2);const d=n.width/i.width,p=n.height/i.height,v=Math.max(1,d,p),l=d/v||0,P=p/v||0,e=i.width*i.height/(window.innerWidth*window.innerHeight),r=e>.12?Math.min(1.5,(e-.12)*10+1):1;return{x:t-(o+i.left),y:f-(y+i.top),sx:l,sy:P,speed:r}}const oe=L({id:String,...I(q({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:ne}}),["absolute"])},"VMenu"),fe=O()({name:"VMenu",props:oe(),emits:{"update:modelValue":a=>!0},setup(a,m){let{slots:n}=m;const i=B(a,"modelValue"),{scopeId:o}=W(),y=K(),u=k(()=>a.id||`v-menu-${y}`),s=U(),t=H(b,null),f=R(0);Y(b,{register(){++f.value},unregister(){--f.value},closeParents(e){setTimeout(()=>{!f.value&&!a.persistent&&(e==null||e&&!j(e,s.value.contentEl))&&(i.value=!1,t==null||t.closeParents())},40)}});async function d(e){var g,h,w;const r=e.relatedTarget,c=e.target;await J(),i.value&&r!==c&&((g=s.value)==null?void 0:g.contentEl)&&((h=s.value)==null?void 0:h.globalTop)&&![document,s.value.contentEl].includes(c)&&!s.value.contentEl.contains(c)&&((w=A(s.value.contentEl)[0])==null||w.focus())}N(i,e=>{e?(t==null||t.register(),document.addEventListener("focusin",d,{once:!0})):(t==null||t.unregister(),document.removeEventListener("focusin",d))});function p(e){t==null||t.closeParents(e)}function v(e){var r,c,g;if(!a.disabled)if(e.key==="Tab"||e.key==="Enter"&&!a.closeOnContentClick){if(e.key==="Enter"&&(e.target instanceof HTMLTextAreaElement||e.target instanceof HTMLInputElement&&!!e.target.closest("form")))return;e.key==="Enter"&&e.preventDefault(),X(A((r=s.value)==null?void 0:r.contentEl,!1),e.shiftKey?"prev":"next",w=>w.tabIndex>=0)||(i.value=!1,(g=(c=s.value)==null?void 0:c.activatorEl)==null||g.focus())}else["Enter"," "].includes(e.key)&&a.closeOnContentClick&&(i.value=!1,t==null||t.closeParents())}function l(e){var c;if(a.disabled)return;const r=(c=s.value)==null?void 0:c.contentEl;r&&i.value?e.key==="ArrowDown"?(e.preventDefault(),D(r,"next")):e.key==="ArrowUp"&&(e.preventDefault(),D(r,"prev")):["ArrowDown","ArrowUp"].includes(e.key)&&(i.value=!0,e.preventDefault(),setTimeout(()=>setTimeout(()=>l(e))))}const P=k(()=>V({"aria-haspopup":"menu","aria-expanded":String(i.value),"aria-owns":u.value,onKeydown:l},a.activatorProps));return _(()=>{const e=C.filterProps(a);return x(C,V({ref:s,id:u.value,class:["v-menu",a.class],style:a.style},e,{modelValue:i.value,"onUpdate:modelValue":r=>i.value=r,absolute:!0,activatorProps:P.value,"onClick:outside":p,onKeydown:v},o),{activator:n.activator,default:function(){for(var r=arguments.length,c=new Array(r),g=0;g<r;g++)c[g]=arguments[g];return x(ee,{root:"VMenu"},{default:()=>{var h;return[(h=n.default)==null?void 0:h.call(n,...c)]}})}})}),F({id:u,\u03A8openChildren:f},s)}});export{fe as V,ne as a};
